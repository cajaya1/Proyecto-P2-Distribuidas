# Script de pruebas r√°pidas para Fase 2Write-Host "üß™ Iniciando pruebas de Fase 2..." -ForegroundColor GreenWrite-Host ""$baseUrl = "http://localhost:8085"# Test 1: LoginWrite-Host "=====================================" -ForegroundColor MagentaWrite-Host "TEST 1: Autenticaci√≥n" -ForegroundColor MagentaWrite-Host "=====================================" -ForegroundColor Magentatry {    $loginBody = '{"username":"admin","password":"admin123"}'    $loginResponse = Invoke-RestMethod -Uri "$baseUrl/auth/login" -Method POST -ContentType "application/json" -Body $loginBody    $token = $loginResponse.token    Write-Host "‚úÖ Login exitoso" -ForegroundColor Green    Write-Host "   Token: $($token.Substring(0, 20))..." -ForegroundColor Gray} catch {    Write-Host "‚ùå Error en login: $($_.Exception.Message)" -ForegroundColor Red    exit 1}$headers = @{    "Authorization" = "Bearer $token"}# Test 2: Crear PedidoWrite-Host ""Write-Host "=====================================" -ForegroundColor MagentaWrite-Host "TEST 2: Crear Pedido (evento RabbitMQ)" -ForegroundColor MagentaWrite-Host "=====================================" -ForegroundColor Magentatry {    $pedidoBody = '{"clienteId":1234567890,"direccionEntrega":"Av. Amazonas 123, Quito","peso":5.5,"tarifa":15.50}'    $pedido = Invoke-RestMethod -Uri "$baseUrl/api/pedidos" -Method POST -Headers $headers -ContentType "application/json" -Body $pedidoBody    $pedidoId = $pedido.id    Write-Host "‚úÖ Pedido creado: ID=$pedidoId" -ForegroundColor Green} catch {    Write-Host "‚ùå Error creando pedido: $($_.Exception.Message)" -ForegroundColor Red}Start-Sleep -Seconds 2# Test 3: Tracking GPSWrite-Host ""Write-Host "=====================================" -ForegroundColor MagentaWrite-Host "TEST 3: Tracking GPS" -ForegroundColor MagentaWrite-Host "=====================================" -ForegroundColor Magentatry {    $ubicacionBody = "{`"repartidorId`":1,`"latitud`":-0.1807,`"longitud`":-78.4678,`"estado`":`"EN_RUTA`",`"velocidad`":35.5,`"pedidoId`":$pedidoId}"    $ubicacion = Invoke-RestMethod -Uri "$baseUrl/api/tracking" -Method POST -Headers $headers -ContentType "application/json" -Body $ubicacionBody    Write-Host "‚úÖ Ubicaci√≥n registrada: ID=$($ubicacion.id)" -ForegroundColor Green} catch {    Write-Host "‚ùå Error registrando ubicaci√≥n: $($_.Exception.Message)" -ForegroundColor Red}Start-Sleep -Seconds 2# Test 4: GraphQLWrite-Host ""Write-Host "=====================================" -ForegroundColor MagentaWrite-Host "TEST 4: GraphQL API" -ForegroundColor MagentaWrite-Host "=====================================" -ForegroundColor Magentatry {    $graphqlBody = '{"query":"{ kpiDiario { fecha totalPedidos pedidosEntregados pedidosPendientes tarifaPromedio } }"}'    $kpis = Invoke-RestMethod -Uri "http://localhost:8088/graphql" -Method POST -Headers $headers -ContentType "application/json" -Body $graphqlBody    Write-Host "‚úÖ GraphQL respondiendo" -ForegroundColor Green    Write-Host "   Total Pedidos: $($kpis.data.kpiDiario.totalPedidos)" -ForegroundColor Gray} catch {    Write-Host "‚ùå Error en GraphQL: $($_.Exception.Message)" -ForegroundColor Red}# Test 5: WebSocket StatusWrite-Host ""Write-Host "=====================================" -ForegroundColor MagentaWrite-Host "TEST 5: WebSocket Server" -ForegroundColor MagentaWrite-Host "=====================================" -ForegroundColor Magentatry {    $wsStatus = Invoke-RestMethod -Uri "http://localhost:8089/status"    Write-Host "‚úÖ WebSocket activo: $($wsStatus.status)" -ForegroundColor Green} catch {    Write-Host "‚ùå Error en WebSocket: $($_.Exception.Message)" -ForegroundColor Red}# Test 6: NotificacionesWrite-Host ""Write-Host "=====================================" -ForegroundColor MagentaWrite-Host "TEST 6: Notificaciones" -ForegroundColor MagentaWrite-Host "=====================================" -ForegroundColor Magentatry {    $notificaciones = Invoke-RestMethod -Uri "$baseUrl/api/notifications/estado/ENVIADO" -Headers $headers    Write-Host "‚úÖ Notificaciones: $($notificaciones.Count) enviadas" -ForegroundColor Green} catch {    Write-Host "‚ùå Error obteniendo notificaciones: $($_.Exception.Message)" -ForegroundColor Red}# ResumenWrite-Host ""Write-Host "=====================================" -ForegroundColor MagentaWrite-Host "üìä FASE 2 - PRUEBAS COMPLETADAS" -ForegroundColor MagentaWrite-Host "=====================================" -ForegroundColor MagentaWrite-Host ""Write-Host "‚úÖ Servicios verificados:" -ForegroundColor GreenWrite-Host "   üîê Autenticaci√≥n JWT"Write-Host "   üì¶ Pedidos + Eventos RabbitMQ"Write-Host "   üìç Tracking GPS"Write-Host "   üìä GraphQL API"Write-Host "   üåê WebSocket Server"Write-Host "   üìß Notificaciones"Write-Host ""Write-Host "üîç Verificaciones manuales:" -ForegroundColor CyanWrite-Host "   RabbitMQ: http://localhost:15672 (guest/guest)"Write-Host "   GraphiQL: http://localhost:8088/graphiql"Write-Host ""Write-Host "‚ú® ¬°Fase 2 funcional!" -ForegroundColor Green